<% layout("layouts/common-template") %>

<!-- 特定のCSS -->
<% head = '<link rel="stylesheet" href="/css/novel_detail.css">' %>

<% 
function getCoverUrl(novel) { 
  return novel.cover && novel.cover.length > 0 && novel.cover[0].url ? novel.cover[0].url :'https://dummyimage.com/280x300/000/fff'; 
} 
%>

<main class="container">
  <div class="img-container">
      <img src="<%= getCoverUrl(novelDetails) %>" alt="小説画像">
  </div>
  <div class="info-container">
    <form class="bookmark-form" data-novel-id="<%= novelDetails._id %>">
      <h2>タイトル: <%= novelDetails.title  %> <button class="bookmark-button" type="submit">読みたい +</button></h2>
    </form>
      <p>著者名: <%= novelDetails.author.author_name %></p>
      <p>あらすじ: </p>
      <textarea placeholder="あらすじ"><%= novelDetails.summary  %></textarea>
      <hr>
      <p>ジャンル: <%= novelDetails.genre.genre_name  %></p>
      <p>出版情報: <%= new Date(novelDetails.publication_date).toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric' }) %> 
        <%= novelDetails.publisher_name %></p>
      <p>ページ数: <%= novelDetails.pages %>ページ</p>
  </div>
</main>


<!-- 特定のJavaScript -->
<% scripts = '<script src="/js/home.js"></script>' %> 
<% scripts = '<script src="/js/bookmark-add.js"></script>' %>