<% layout("layouts/common-template") %>

<!-- 特定のCSS -->
<% head = '<link rel="stylesheet" href="/css/home.css">' %>

<% 
function getCoverUrl(novel) { 
  return novel.cover && novel.cover.length > 0 && novel.cover[0].url ? novel.cover[0].url :'https://dummyimage.com/280x300/000/fff'; 
} 
%>

<!-- コンテンツ -->
<main class="content">
  <section class="section">
    <h2>読みたい一覧</h2>
    <div class="book-list">
      <% for (let novel of novels) { %>
        <div class="book-item">
          <div class="book-cover">
            <a href="/novel/detail/<%= novel._id %>">
              <img src="<%= getCoverUrl(novel) %>" alt="<%= novel.title %>の表紙">
            </a>
            <!-- <form action="/user/bookmark/cancel" method="post"> -->
            <form class="bookmark-form" data-novel-id="<%= novel._id %>">
              <!-- <input type="hidden" name="novelId" value="<%= novel._id %>"> -->
              <button class="bookmark-button" type="submit">読みたい解除</button>
            </form>
          </div>
          <p><%= novel.title %></p>
          <p><%= novel.author.author_name %></p>
        </div>
      <% } %>
    </div>
  </section>
</main>

<!-- 特定のJavaScript -->
<% scripts = '<script src="/js/home.js"></script>' %>
<% scripts = '<script src="/js/bookmark-cancel.js"></script>' %>